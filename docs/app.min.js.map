{"version":3,"sources":["datos.ts","main.ts"],"names":["x","totalSales","product","sales","margin","width","height","svg","y","setupCanvasSize","top","left","bottom","right","appendSvg","domElement","d3","select","append","attr","setupXScale","maxSales","max","d","i","scaleLinear","range","domain","setupYScale","scaleBand","rangeRound","map","appendXAxis","call","axisBottom","appendYAxis","axisLeft","appendChartBars","selectAll","data","enter","_","bandwidth"],"mappings":"aAAA,ICYIA,EDZAC,aACAC,QAAS,SAAUC,MAAO,IAC1BD,QAAS,SAAUC,MAAO,IAC1BD,QAAS,UAAWC,MAAO,ICI3BC,OAAa,KACbC,MAAY,KACZC,OAAa,KAEbC,IAAU,KACHC,EAAQ,KAWnB,SAAAC,kBAEEJ,MAAQ,KADRD,QAAUM,IAAK,EAAGC,KAAM,GAAIC,OAAQ,GAAIC,MAAO,KAC1BF,KAAOP,OAAOS,MACnCP,OAAS,IAAMF,OAAOM,IAAMN,OAAOQ,OAGrC,SAAAE,UAAmBC,GACjBR,IAAMS,GAAGC,OAAOF,GAAYG,OAAO,OACtBC,KAAK,QAASd,MAAQD,OAAOO,KAAOP,OAAOS,OAC3CM,KAAK,SAAUb,OAASF,OAAOM,IAAMN,OAAOQ,QAC5CM,OAAO,KACPC,KAAK,YAAY,aAAaf,OAAOO,KAAI,KAAKP,OAAOM,IAAG,KAQvE,SAAAU,cAEE,IAAIC,EAAeL,GAAGM,IAAIrB,WAAY,SAASsB,EAAGC,GAChD,OAAOD,EAAEpB,QAGXH,EAAIgB,GAAGS,cACJC,OAAO,EAAGrB,QACVsB,QAAQ,EAAGN,IAOhB,SAAAO,cAEEpB,EAAIQ,GAAGa,YACJC,YAAY,EAAGxB,SACfqB,OAAO1B,WAAW8B,IAAI,SAASR,EAAGC,GACjC,OAAOD,EAAErB,WAIf,SAAA8B,cAEEzB,IAAIW,OAAO,KACRC,KAAK,YAAY,gBAAgBb,OAAM,KACvC2B,KAAKjB,GAAGkB,WAAWlC,IAGxB,SAAAmC,cAEE5B,IAAIW,OAAO,KACVe,KAAKjB,GAAGoB,SAAS5B,IAGpB,SAAA6B,kBAIc9B,IAAI+B,UAAU,QACvBC,KAAKtC,YAGeuC,QAWZtB,OAAO,QACbC,KAAK,IAAKnB,EAAE,IACZmB,KAAK,IAAK,SAASI,EAAOkB,GACzB,OAAOjC,EAAEe,EAAErB,WAEZiB,KAAK,SAAUX,EAAEkC,WACjBvB,KAAK,QAAS,SAASI,EAAOkB,GAC7B,OAAOzC,EAAEuB,EAAEpB,SA3FnBM,kBACAK,UAAU,QACVM,cACAQ,cACAI,cACAG,cACAE","file":"app.min.js","sourcesContent":["var totalSales = [\n  { product: 'Hoodie', sales: 7 },\n  { product: 'Jacket', sales: 6 },\n  { product: 'Snuggie', sales: 9 },\n  ];\n  ","\n// Let's start using ES6\n// And let's organize the code following clean code concepts\n// Later one we will complete a version using imports + webpack\n\n// Isolated data array to a different file\n\nlet margin:any = null,\n    width:any = null,\n    height:any = null;\n\nlet svg:any = null;\nlet x:any, y:any = null; // scales\n\nsetupCanvasSize();\nappendSvg(\"body\");\nsetupXScale();\nsetupYScale();\nappendXAxis();\nappendYAxis();\nappendChartBars();\n\n// 1. let's start by selecting the SVG Node\nfunction setupCanvasSize() {\n  margin = {top: 0, left: 80, bottom: 20, right: 30};\n  width = 960 - margin.left - margin.right;\n  height = 120 - margin.top - margin.bottom;\n}\n\nfunction appendSvg(domElement:any) {\n  svg = d3.select(domElement).append(\"svg\")\n              .attr(\"width\", width + margin.left + margin.right)\n              .attr(\"height\", height + margin.top + margin.bottom)\n              .append(\"g\")\n              .attr(\"transform\",`translate(${margin.left}, ${margin.top})`);\n\n}\n\n// Now on the X axis we want to map totalSales values to\n// pixels\n// in this case we map the canvas range 0..350, to 0...maxSales\n// domain == data (data from 0 to maxSales) boundaries\nfunction setupXScale()\n{\n  var maxSales:any = d3.max(totalSales, function(d, i) {\n    return d.sales;\n  });\n\n  x = d3.scaleLinear()\n    .range([0, width])\n    .domain([0, maxSales]);\n\n}\n\n// Now we don't have a linear range of values, we have a discrete\n// range of values (one per product)\n// Here we are generating an array of product names\nfunction setupYScale()\n{\n  y = d3.scaleBand()\n    .rangeRound([0, height])\n    .domain(totalSales.map(function(d, i) {\n      return d.product;\n    }));\n}\n\nfunction appendXAxis() {\n  // Add the X Axis\n  svg.append(\"g\")\n    .attr(\"transform\",`translate(0, ${height})`)\n    .call(d3.axisBottom(x));\n}\n\nfunction appendYAxis() {\n  // Add the Y Axis\n  svg.append(\"g\")\n  .call(d3.axisLeft(y));\n}\n\nfunction appendChartBars()\n{\n  // 2. Now let's select all the rectangles inside that svg\n  // (right now is empty)\n  var rects = svg.selectAll('rect')\n    .data(totalSales);\n\n    // Now it's time to append to the list of Rectangles we already have\n    var newRects = rects.enter();\n\n    // Let's append a new Rectangles\n    // UpperCorner:\n    //    Starting x position, the start from the axis\n    //    Starting y position, where the product starts on the y scale\n    // React width and height:\n    //    height: the space assign for each entry (product) on the Y axis\n    //    width: Now that we have the mapping previously done (linear)\n    //           we just pass the sales and use the X axis conversion to\n    //           get the right value\n    newRects.append('rect')\n      .attr('x', x(0))\n      .attr('y', function(d:any, _:any) {\n        return y(d.product);\n      })\n      .attr('height', y.bandwidth)\n      .attr('width', function(d:any, _:any) {\n        return x(d.sales);\n      });\n}\n"]}